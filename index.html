<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ç´ æå±‹ åœ¨åº«ç®¡ç†ä¼ç¥¨</title>
<style>
:root{
  --paper:#f6f1e7; --paper-dark:#e9e1d3; --ink:#2b2b2b;
  --sell:#4f8f4f; --buy:#b64a4a;
}
body{
  min-height:100vh;
  background:linear-gradient(180deg,rgba(0,0,0,.25),rgba(0,0,0,.4)),
  repeating-linear-gradient(90deg,#6b4f3f 0px,#6b4f3f 40px,#735744 40px,#735744 80px);
  font-family:"Noto Sans JP",sans-serif;padding:24px;color:var(--ink);
}
body.buy-mode{
  background:linear-gradient(180deg,rgba(0,0,0,.3),rgba(0,0,0,.5)),
  repeating-linear-gradient(90deg,#5a3b3b 0px,#5a3b3b 40px,#633f3f 40px,#633f3f 80px);
}
.card{max-width:700px;margin:auto;padding:22px;border-radius:12px;
background:repeating-linear-gradient(-45deg,#f6f1e7,#f6f1e7 6px,#f3ecdf 6px,#f3ecdf 12px);
border:2px solid var(--paper-dark);box-shadow:0 8px 20px rgba(0,0,0,.4);}
h2{text-align:center;margin-bottom:4px;}
.subtitle{text-align:center;font-size:12px;opacity:.7;margin-bottom:10px;}

.admin-bar{
  margin-bottom:10px;
  display:flex;
  justify-content:flex-end;
  gap:6px;
}
.admin-bar button{
  padding:6px 10px;border-radius:6px;border:2px solid #c9bfae;background:#fff;cursor:pointer;font-weight:600;
}

input{width:100%;box-sizing:border-box;padding:6px;height:34px;border-radius:6px;border:2px solid #c9bfae;background:#fffdf8;font-size:14px;}
.form-group{display:grid;gap:10px;margin-bottom:14px;}
.tabs{display:flex;gap:6px;margin-bottom:14px;}
.tab{flex:1;padding:10px;border-radius:8px;border:2px solid #c9bfae;background:#fff;cursor:pointer;font-weight:600;}
.tab.active{background:var(--paper-dark);}

#items::before{
  content:"ç´ æ / å˜ä¾¡ / åœ¨åº« / æ•°é‡ / å°è¨ˆ";
  display:grid;
  grid-template-columns:1fr 90px 90px 130px 90px;
  gap:8px;font-size:12px;opacity:.7;margin-bottom:6px;
}
.item-row{
  display:grid;
  grid-template-columns:1fr 90px 90px 130px 90px;
  gap:8px;margin-bottom:6px;align-items:center;
}
.item-price{text-align:right;}
.item-stock{text-align:center;background:#eee;}
.item-stock.editable{background:#fff;}
.qty-box{display:flex;gap:4px;}
.qty-box button{width:26px;height:26px;border-radius:6px;border:2px solid #c9bfae;background:#fff;font-weight:700;cursor:pointer;}
.item-qty{text-align:center;}
.item-sub{text-align:right;font-size:13px;}

.total-box{margin-top:16px;padding:14px;background:#fffdf8;border:2px dashed #c9bfae;border-radius:10px;display:flex;justify-content:center;gap:16px;}
#total{font-size:22px;font-weight:700;color:var(--sell);}
body.buy-mode #total{color:var(--buy);}

button.send{width:100%;padding:14px;margin-top:14px;border-radius:10px;border:none;background:linear-gradient(#fff,#e9e1d3);font-weight:700;cursor:pointer;}
</style>
</head>
<body>
<div class="card">
  <h2>ã ã½ã‚“å•†åº—ï¼œç´ æå±‹ï¼</h2>
  <div class="subtitle">â€• åœ¨åº«é€£å‹• å–å¼•ä¼ç¥¨ â€•</div>

  <div class="admin-bar">
    <button id="adminBtn">ğŸ”’ ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³</button>
    <button id="goAdminPage">ğŸ“¦ åœ¨åº«ç®¡ç†ãƒšãƒ¼ã‚¸</button>
  </div>

  <div class="form-group">
    <input id="shop" placeholder="é›»è©±ç•ªå·ï¼œã‚²ãƒ¼ãƒ å†…ï¼">
    <input id="name" placeholder="ãŠå®¢æ§˜å">
  </div>

  <div class="tabs">
    <button class="tab active" data-mode="sell">è²©å£²</button>
    <button class="tab" data-mode="buy">è²·å–</button>
  </div>

  <div id="items"></div>

  <div class="total-box">
    <span id="totalLabel">æ”¯æ‰•é¡</span>
    <strong id="total">Â¥0</strong>
  </div>

  <button id="sendBtn" class="send">ä¼ç¥¨ã‚’é€ä¿¡</button>
</div>

<script>
const ADMIN_PASS = "851312";
const webhookURL = "ã“ã“ã«ã‚ãªãŸã®Webhook";
let isAdmin = localStorage.getItem("isAdmin")==="true";
let mode="sell";

const baseData={
 sell:[{name:"ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯",price:7000},{name:"ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ ",price:7000},{name:"é‰„",price:7000},{name:"å‰›é‰„",price:7000},{name:"ã‚¹ã‚¯ãƒ©ãƒƒãƒ—",price:7000},{name:"ã‚´ãƒ ",price:7000},{name:"å¸ƒ",price:7000}],
 buy:[{name:"ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯",price:5000},{name:"ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ ",price:5000},{name:"é‰„",price:5000},{name:"å‰›é‰„",price:5000},{name:"ã‚¹ã‚¯ãƒ©ãƒƒãƒ—",price:5000},{name:"ã‚´ãƒ ",price:5000},{name:"å¸ƒ",price:5000},{name:"ã‚¨ã‚¤",price:1200000},{name:"ã‚µãƒ¡",price:1100000}]
};

const itemsEl=document.getElementById("items");
const totalEl=document.getElementById("total");
const totalLabel=document.getElementById("totalLabel");
const adminBtn=document.getElementById("adminBtn");
const nameEl=document.getElementById("name");
const shopEl=document.getElementById("shop");

function getStock(name){return Number(localStorage.getItem("stock_"+name)||0);}
function setStock(name,val){localStorage.setItem("stock_"+name,val);}

function render(){
 itemsEl.innerHTML="";
 baseData[mode].forEach(i=>{
   const stock=getStock(i.name);
   itemsEl.innerHTML+=`
   <div class="item-row">
     <div>${i.name}</div>
     <input class="item-price" value="${i.price}" readonly>
     <input class="item-stock ${isAdmin?"editable":""}" type="number" value="${stock}" data-name="${i.name}" ${isAdmin?"":"readonly"}>
     <div class="qty-box">
       <button type="button" class="minus">ï¼</button>
       <input class="item-qty" type="number" value="0" min="0">
       <button type="button" class="plus">ï¼‹</button>
     </div>
     <div class="item-sub">Â¥0</div>
   </div>`;
 });
 totalEl.textContent="Â¥0";
 totalLabel.textContent=mode==="sell"?"æ”¯æ‰•é¡":"å—å–é¡";
 document.body.classList.toggle("buy-mode",mode==="buy");
 adminBtn.textContent=isAdmin?"ğŸ”“ ç®¡ç†è€…ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ":"ğŸ”’ ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³";
}
render();

adminBtn.onclick=()=>{
 if(isAdmin){isAdmin=false;localStorage.setItem("isAdmin","false");render();return;}
 const pass=prompt("ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›");
 if(pass===ADMIN_PASS){isAdmin=true;localStorage.setItem("isAdmin","true");render();}
 else alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");
};

// ğŸ”¹ ç®¡ç†ãƒšãƒ¼ã‚¸ã¸ç§»å‹•
document.getElementById("goAdminPage").onclick=()=>{
 if(localStorage.getItem("isAdmin")!=="true"){alert("ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™");return;}
 location.href="admin.html";
};

document.addEventListener("input",e=>{
 if(e.target.classList.contains("item-stock") && isAdmin){
   setStock(e.target.dataset.name,e.target.value);
 }
 calc();
});

document.addEventListener("click",e=>{
 if(e.target.classList.contains("plus")||e.target.classList.contains("minus")){
   const input=e.target.parentElement.querySelector(".item-qty");
   let val=Number(input.value);
   if(e.target.classList.contains("plus")) val++;
   if(e.target.classList.contains("minus")&&val>0) val--;
   input.value=val;
   calc();
 }
});

function calc(){
 let total=0;
 document.querySelectorAll(".item-row").forEach(r=>{
   const price=Number(r.querySelector(".item-price").value);
   const qty=Number(r.querySelector(".item-qty").value);
   const sub=price*qty;
   r.querySelector(".item-sub").textContent=`Â¥${sub.toLocaleString()}`;
   total+=sub;
 });
 totalEl.textContent=`Â¥${total.toLocaleString()}`;
}

document.querySelectorAll(".tab").forEach(t=>{
 t.onclick=()=>{document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
 t.classList.add("active");mode=t.dataset.mode;render();};
});
</script>
</body>
</html>
