<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>è³¼å…¥å±¥æ­´</title>

  <!-- ãƒ•ã‚©ãƒ³ãƒˆ -->
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    body{
      margin:0;
      padding:0;
      min-height:100vh;
      background:radial-gradient(circle at top left,#2a1c14,#0f0b09 70%);
      font-family:'Oswald',sans-serif;
      color:#e6d9c8;
    }

    .card{
      max-width:520px;
      margin:30px 0 30px 30px;
      background:linear-gradient(180deg,#1a120d,#120b08);
      border:1px solid #3a2a1d;
      border-radius:18px;
      box-shadow:0 20px 60px rgba(0,0,0,.75), inset 0 0 30px rgba(255,200,120,.05);
      padding:26px;
    }

    h2{color:#f5deb3;letter-spacing:2px;margin-bottom:20px;}
    h3{margin-top:26px;color:#e0c58a;border-bottom:1px solid #3a2a1d;padding-bottom:6px;}
    label{display:block;margin-bottom:6px;color:#cdbba7;}

    select,input{
      width:100%;background:#0f0b09;color:#f0e6d8;
      border:1px solid #3a2a1d;border-radius:10px;
      padding:10px;font-size:15px;box-sizing:border-box;
    }

    .item-row{
      display:grid;grid-template-columns:140px 120px 120px;
      gap:8px;align-items:center;margin-top:10px;
      background:rgba(255,255,255,.02);
      border:1px solid #2e2118;border-radius:12px;padding:8px;
    }

    .item-name{color:#f5deb3;}

    .total-box{
      display:flex;justify-content:space-between;
      margin-top:24px;padding-top:12px;border-top:1px solid #3a2a1d;
    }

    #total{font-size:22px;color:#facc15;}

    button{
      width:100%;margin-top:22px;padding:14px;
      font-size:16px;font-weight:600;
      color:#2b1c0f;background:linear-gradient(180deg,#f5deb3,#caa45c);
      border:none;border-radius:14px;cursor:pointer;
    }

    /* ===== ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ ===== */
    .item-price{cursor:not-allowed;}
    .admin-on .item-price{
      background:#1a140f;border-color:#caa45c;
      color:#ffd88a;cursor:text;
    }
  </style>
</head>
<body>

<div class="card">
  <h2>tanu</h2>

  <!-- ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ -->
  <label>ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰</label>
  <div style="display:flex;gap:8px;">
    <input type="password" id="adminPass" placeholder="ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰">
    <button type="button" id="adminBtn">è§£é™¤</button>
  </div>

  <form id="reserveForm">
    <h3>åå‰</h3>
    <select id="name" required></select>

    <h3>å£²å´ã‚¢ã‚¤ãƒ†ãƒ </h3>
    <div id="items"></div>

    <div class="total-box">
      <span>åˆè¨ˆé‡‘é¡</span>
      <strong id="total">Â¥0</strong>
    </div>

    <button type="submit">é€ä¿¡</button>
  </form>
</div>

<script>
const webhookURL = "https://discord.com/api/webhooks/1434674903075782816/g_NAvtOTHBv_q0K14noB1bKMo9E5kTVKXVdt8L2PedO2YNfSZ5D-Vs8-26t-9Hc8shdf";
const ADMIN_PASSWORD = "85130";
let adminMode = false;

const names = ["ãƒ†ã‚¹ãƒˆå›"];
const fixedItems = [
  { name:"ã‚¬ãƒ©ã‚¹", price:3000 },
  { name:"ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯", price:10000 },
  { name:"éŠ…", price:3000 },
  { name:"ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ ", price:10000 },
  { name:"é‰„", price:10000 },
  { name:"å‰›é‰„", price:10000 },
  { name:"ã‚¹ã‚¯ãƒ©ãƒƒãƒ—", price:10000 },
  { name:"ã‚´ãƒ ", price:10000 },
  { name:"å¸ƒ", price:10000 },
  { name:"é‰„ç²‰", price:3000 },
  { name:"ã‚¯ãƒªãƒ—ãƒˆ", price:3000 },
  { name:"è²·å–ãƒ»ã‚¬ãƒ©ã‚¹", price:1000 },
  { name:"è²·å–ãƒ»ãƒ—ãƒ©ã‚¹ãƒãƒƒã‚¯", price:8000 },
  { name:"è²·å–ãƒ»éŠ…", price:1000 },
  { name:"è²·å–ãƒ»ã‚¢ãƒ«ãƒŸãƒ‹ã‚¦ãƒ ", price:8000 },
  { name:"è²·å–ãƒ»é‰„", price:8000 },
  { name:"è²·å–ãƒ»å‰›é‰„", price:8000 },
  { name:"è²·å–ãƒ»ã‚¹ã‚¯ãƒ©ãƒƒãƒ—", price:8000 },
  { name:"è²·å–ãƒ»ã‚´ãƒ ", price:8000 },
  { name:"è²·å–ãƒ»å¸ƒ", price:8000 },
  { name:"è²·å–ãƒ»é‰„ç²‰", price:1000 },
  { name:"è²·å–ãƒ»ã‚¯ãƒªãƒ—ãƒˆ", price:1000}
];

const nameEl = document.getElementById("name");
const itemsEl = document.getElementById("items");
const totalEl = document.getElementById("total");

nameEl.innerHTML = '<option value="">é¸æŠã—ã¦ãã ã•ã„</option>';
names.forEach(n=>nameEl.innerHTML+=`<option>${n}</option>`);

fixedItems.forEach(item=>{
  const row=document.createElement("div");
  row.className="item-row";
  row.innerHTML=`
    <div class="item-name">${item.name}</div>
    <input type="number" class="item-price" value="${item.price}" readonly>
    <input type="number" class="item-qty" value="0" min="0">
  `;
  itemsEl.appendChild(row);
});

function calcTotal(){
  let total=0;
  document.querySelectorAll('.item-row').forEach(r=>{
    total+=r.querySelector('.item-price').value*r.querySelector('.item-qty').value;
  });
  totalEl.textContent=`Â¥${total.toLocaleString()}`;
  return total;
}

document.addEventListener('input',e=>{
  if(e.target.classList.contains('item-price')||e.target.classList.contains('item-qty')){
    calcTotal();
  }
});

// ç®¡ç†è€…åˆ‡æ›¿
document.getElementById("adminBtn").addEventListener("click",()=>{
  const pass=document.getElementById("adminPass").value;
  if(!adminMode){
    if(pass!==ADMIN_PASSWORD){alert("ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");return;}
    adminMode=true;document.body.classList.add("admin-on");
    document.querySelectorAll('.item-price').forEach(i=>i.removeAttribute('readonly'));
    alert("ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ ON");
  }else{
    adminMode=false;document.body.classList.remove("admin-on");
    document.querySelectorAll('.item-price').forEach(i=>i.setAttribute('readonly',true));
    document.getElementById("adminPass").value="";
    alert("ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ OFF");
  }
});

// é€ä¿¡
document.getElementById("reserveForm").addEventListener("submit",async e=>{
  e.preventDefault();
  const total=calcTotal();
  const fields=[];
  document.querySelectorAll('.item-row').forEach(r=>{
    const q=r.querySelector('.item-qty').value;
    if(q>0){fields.push({name:r.querySelector('.item-name').textContent,value:`${q} å€‹`,inline:true});}
  });
  fields.push({name:"åˆè¨ˆ",value:`Â¥${total.toLocaleString()}`});

  await fetch(webhookURL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({embeds:[{title:"ğŸ•´ï¸ Smoke Shop Transaction",fields,timestamp:new Date()}]})});
  alert("é€ä¿¡å®Œäº†");
});
</script>
</body>
</html>
